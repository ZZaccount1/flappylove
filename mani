
--Screen
SCREEN_WIDTH = 750
SCREEN_HEIGHT = 500

--Sleep function
local clock = os.clock
function sleep(n)-- seconds
local t0 = clock()
while clock() - t0 <= n do end
end

--Pipes
firstYPipes = 0

function love.load()
    love.window.setMode(SCREEN_WIDTH, SCREEN_HEIGHT)

    --require
    wf = require "libraries/windfield"
    require("bird")
    require("pipe")

    world = wf.newWorld(0, 500)

    player = world:newRectangleCollider(350, 100, 80, 80)

    --Create pipes
    Pipes.x = Pipes.spawnX
    Pipes.y = love.math.random(Pipes.minY, Pipes.maxY)
    firstYPipes = Pipes.y
    pipes = world:newRectangleCollider(Pipes.x, Pipes.y, Pipes.xSize, Pipes.ySize)
end

function love.update(dt)
    world:update(dt)

    
    pipes:applyForce(-5000, 0)
end

function love.draw()
    world:draw()
    love.graphics.circle("fill", Bird.x, Bird.y, Bird.size)
end

function love.keypressed(key)
    local px, py = player:getLinearVelocity()
    if key == 'up' then
        player:applyLinearImpulse(0, -py*15)
        player:applyLinearImpulse(0, Bird.jumpForce)
    end
end